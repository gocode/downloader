<link rel="import" href="/static/bower_components/polymer/polymer.html">
<link rel="import" href="/static/bower_components/paper-item/paper-item.html">
<link rel="import" href="/static/bower_components/paper-item/paper-icon-item.html">
<link rel="import" href="/static/bower_components/paper-item/paper-item-body.html">
<link rel="import" href="/static/bower_components/paper-progress/paper-progress.html">
<link rel="import" href="/static/bower_components/iron-collapse/iron-collapse.html">

<dom-module id="go-resource">
	<style>
		paper-progress {
			width: 100%;
		}
		iron-collapse {
			width: 100%; 
		}
		paper-item-body {
			width: 100%;
		}
		.container {
			border: 1px solid lightgrey;
		}
	</style>

	<template>
		<div class="container">
		<paper-item>
			<paper-icon-button icon="expand-more" on-click="toggle"></paper-icon-button>
			<paper-item-body>
				<span>{{resource.Url}}</span>
				<paper-progress value="{{resource.pct}}"></paper-progress>
			</paper-item-body>
			<paper-icon-button icon="av:pause"></paper-icon-button>
			<paper-icon-button icon="av:stop"></paper-icon-button>
		</paper-item>
		<iron-collapse id="collapse">
			<paper-icon-item>
				<paper-item-body>
					<span>Section 1</span>
					<paper-progress value="[[arrayItem(sections.*, 0, 'PctComplete')]]"></paper-progress>
				</paper-item-body>
				<paper-icon-button icon="av:pause"></paper-icon-button>
				<paper-icon-button icon="av:stop"></paper-icon-button>	
			</paper-icon-item>
		</iron-collapse>
		</div>
	</template>

	<script>
		Polymer({
			is: 'go-resource',

			properties: {
				resource: Object,
				sections: Array
			},

			arrayItem: function(change, index, path) {
        		return this.get(path, change.base[index]);
      		},

			ready: function() {
				this.pct = '50';
			},

			toggle: function() {
				this.$.collapse.toggle();
			}
		});
	</script>
</dom-module>